<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AulIA - Plataforma Inteligente</title>
    <style>
        :root {
            --primary: #006A6A;
            --bg-color: #FFFFFF;
            --card-bg: #F8F9FA;
            --text-main: #212529;
            --radius: 12px;
            --font-family: 'Segoe UI', sans-serif;
            --chat-user: #e3f2fd;
            --chat-ai: #f1f8e9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-family); background-color: var(--bg-color); color: var(--text-main); }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        header { padding: 40px 20px; text-align: center; }
        .logo-img { max-width: 300px; height: auto; }
        .hero-desc { max-width: 700px; margin: 20px auto; font-size: 1.1rem; color: #555; }

        /* Grids & Cards */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; padding: 20px 0; }
        .sim-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; padding: 20px 0; }

        .card { 
            background: var(--card-bg); 
            padding: 30px; 
            border-radius: var(--radius); 
            border: 1px solid #eee;
            transition: 0.3s;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--primary); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .card h3 { color: var(--primary); margin-bottom: 10px; font-size: 1.2rem; }

        /* Case Styles */
        .case-container {
            background: #fff; padding: 30px; border-radius: var(--radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 30px;
            border-left: 5px solid var(--primary);
        }
        .case-text { font-size: 1.05rem; line-height: 1.6; color: #333; }
        .case-text ul { margin-left: 20px; margin-top: 10px; }

        /* Task & Chat Styles */
        .task-block { margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px; }
        .task-title { font-weight: bold; color: var(--primary); font-size: 1.1rem; margin-bottom: 10px; }
        
        .chat-box {
            background: #fff; border: 1px solid #ddd; border-radius: 8px;
            margin-top: 15px; overflow: hidden; display: flex; flex-direction: column;
        }
        .chat-header { 
            background: #f4f4f4; padding: 10px 15px; font-weight: bold; color: var(--primary);
            border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;
        }
        .chat-messages {
            height: 250px; overflow-y: auto; padding: 15px; background: #fafafa;
            display: flex; flex-direction: column; gap: 10px;
        }
        .message { padding: 10px 15px; border-radius: 12px; max-width: 80%; font-size: 0.95rem; line-height: 1.4; }
        .msg-user { align-self: flex-end; background-color: var(--chat-user); color: #0d47a1; border-bottom-right-radius: 2px; }
        .msg-ai { align-self: flex-start; background-color: var(--chat-ai); color: #1b5e20; border-bottom-left-radius: 2px; border: 1px solid #c8e6c9; }
        
        .chat-input-area { display: flex; gap: 10px; padding: 10px; background: #fff; border-top: 1px solid #eee; }
        .chat-input { flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 6px; }
        .chat-btn { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .chat-btn:hover { opacity: 0.9; }

        /* Utility */
        .btn { background: var(--primary); color: white; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; width: 100%; margin-top: auto; }
        .hidden { display: none; }
        .breadcrumbs { margin: 20px 0; color: var(--primary); cursor: pointer; font-size: 0.9rem; }
        
        /* Sim Cards */
        .card-sim { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 20px; text-align: center; color: #555; cursor: default; }
        .card-ia { background: #e6fcfc; border: 2px dashed var(--primary); cursor: pointer; color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <div class="logo-container">
                <img src="logo.png" alt="Logo AulIA" class="logo-img" onerror="this.style.display='none'; document.getElementById('alt-logo').style.display='block'">
                <h1 id="alt-logo" style="display:none; color:var(--primary); font-size:2.5rem;">AulIA</h1>
            </div>
            <p class="hero-desc">
                Plataforma de simulaciones educativas basada en IA generativa. Practica la toma de decisiones y la reflexi√≥n docente en entornos profesionales seguros.
            </p>
        </div>
    </header>

    <div class="container">
        <div id="breadcrumbs" class="breadcrumbs hidden" onclick="app.goHome()"> Inicio </div>
        
        <section id="view-home"><div class="grid" id="degrees-grid"></div></section>
        
        <section id="view-subjects" class="hidden">
            <h2 id="degree-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div class="grid" id="subjects-grid"></div>
        </section>

        <section id="view-levels" class="hidden">
            <h2 id="subject-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div class="grid" id="standard-levels-grid"></div>
        </section>

        <section id="view-units" class="hidden">
            <h2 id="unit-subject-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div class="grid" id="units-grid"></div>
        </section>

        <section id="view-uc3-menu" class="hidden">
            <h2 style="margin-bottom:20px; color:var(--primary)">Unidad Competencial 3</h2>
            <div class="grid">
                <div class="card">
                    <h3>Actividad de la Unidad Competencial 3</h3>
                    <p>Resoluci√≥n de casos pr√°cticos evaluables.</p>
                    <button class="btn" onclick="app.loadUC3ActivityMenu()">Acceder</button>
                </div>
                <div class="card">
                    <h3>Pr√°ctica con simulaciones</h3>
                    <p>Entrenamiento pr√°ctico con diferentes niveles.</p>
                    <button class="btn" onclick="app.loadUC3PracticeLevels()">Acceder</button>
                </div>
            </div>
        </section>

        <section id="view-uc3-cases-menu" class="hidden">
            <h2 style="margin-bottom:20px; color:var(--primary)">Selecci√≥n de Caso de Estudio</h2>
            <div class="grid">
                <div class="card"><h3>Caso de Marina</h3><p>Dificultades vocales</p><button class="btn" onclick="app.loadCase('marina')">Acceder</button></div>
                <div class="card"><h3>Caso de Ana√≠s</h3><p>Dificultades articulatorias</p><button class="btn" onclick="app.loadCase('anais')">Acceder</button></div>
                <div class="card"><h3>Caso de Ra√∫l</h3><p>Dificultades fonol√≥gicas</p><button class="btn" onclick="app.loadCase('raul')">Acceder</button></div>
                <div class="card"><h3>Caso de √Ångel</h3><p>Dificultades org√°nicas</p><button class="btn" onclick="app.loadCase('angel')">Acceder</button></div>
                <div class="card"><h3>Caso de Lu√≠s</h3><p>Dificultades en la fluidez</p><button class="btn" onclick="app.loadCase('luis')">Acceder</button></div>
            </div>
        </section>

        <section id="view-uc3-case-detail" class="hidden">
            <h2 id="case-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div id="case-content" class="case-container"></div>

            <div id="case-tasks">
                </div>
        </section>

        <section id="view-uc3-levels" class="hidden">
            <h2 style="margin-bottom:20px; color:var(--primary)">Pr√°ctica - Niveles</h2>
            <div class="grid" id="uc3-levels-grid"></div> 
        </section>

        <section id="view-uc3-sims" class="hidden">
            <h2 id="uc3-sim-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div id="uc3-sim-grid" class="sim-grid"></div>
        </section>

        <section id="view-simulations" class="hidden">
            <h2 id="level-title" style="margin-bottom:20px; color:var(--primary)"></h2>
            <div id="simulations-grid" class="sim-grid"></div>
        </section>
    </div>

    <script>
        // --- CEREBRO DE LA IA (Simulaci√≥n del Backend/API) ---
        // Este objeto contiene las instrucciones de sistema basadas en la teor√≠a subida.
        const aiBrain = {
            marina: {
                role: "Eres un tutor experto en logopedia escolar especializado en Disfon√≠as.",
                theory: "Marina presenta disfon√≠a infantil funcional (n√≥dulos) por mal uso y abuso vocal (gritos, tensi√≥n).",
                guidance: "Si el alumno sugiere cirug√≠a, corr√≠gele indicando que en ni√±os se prioriza la higiene vocal y rehabilitaci√≥n. Enf√≥cate en la prevenci√≥n (hidrataci√≥n, control de ruido, modelos vocales)."
            },
            anais: {
                role: "Eres un tutor experto en Trastornos de los Sonidos del Habla (TSH).",
                theory: "Ana√≠s tiene alteraciones FON√âTICAS (articulatorias). Errores estables (seseo, rotacismo). No son procesos de simplificaci√≥n inconsistentes.",
                guidance: "Aseg√∫rate que el alumno distinga entre dificultad para 'articular' (Ana√≠s) y dificultad para 'organizar sonidos' (Fonol√≥gico). Sugiere actividades de discriminaci√≥n auditiva y praxias."
            },
            raul: {
                role: "Eres un experto en Trastornos Fonol√≥gicos.",
                theory: "Ra√∫l tiene un Trastorno Fonol√≥gico (puede articular, pero simplifica estructuras: omisiones, met√°tesis). Cita a Laura Bosch.",
                guidance: "Si el alumno dice 'dislalia', corr√≠gele. Ra√∫l tiene problemas en la estructura de la palabra y conciencia fonol√≥gica, no en los m√∫sculos. Sugiere actividades de conciencia fonol√≥gica y segmentaci√≥n sil√°bica."
            },
            angel: {
                role: "Eres un experto en alteraciones anat√≥micas (Disglosias).",
                theory: "√Ångel tiene anquiloglosia (frenillo corto). Es una causa ORG√ÅNICA.",
                theoryCheck: "El tratamiento requiere valoraci√≥n m√©dica (frenectom√≠a) coordinada con logopedia.",
                guidance: "Gu√≠a al alumno para que no lo trate como un simple retraso. Es f√≠sico. ¬øQu√© har√≠as antes de intervenir en el aula? (Derivar al especialista)."
            },
            luis: {
                role: "Eres un experto en Neuropsicolog√≠a y lenguaje.",
                theory: "CASO TRAMPA: Parece disfemia (tartamudez) por los bloqueos, pero hay espasticidad, debilidad y lentitud (signos de Disartria o da√±o neurol√≥gico).",
                guidance: "Si el alumno dice solo 'tartamudez', frena y pide que lea los s√≠ntomas f√≠sicos (espasticidad). Hazle ver la posible causa neurol√≥gica. No es solo fluidez verbal."
            }
        };

        // DATOS DE NAVEGACI√ìN
        const casesData = {
            marina: `<strong>Antecedentes:</strong> Marina (5 a√±os) voz grave, esfuerzo vocal, "gallos", sonidos forzados. Musculatura tensa.<br><strong>Factores:</strong> Suele gritar. Ambiente normal.<br><strong>Informe:</strong> ORL confirma n√≥dulos vocales.`,
            anais: `<strong>Antecedentes:</strong> Ana√≠s (5 a√±os) lenguaje "infantilizado".<br><strong>Errores:</strong> Seseo, Rotacismo, Omisi√≥n de /r/ final, Simplificaci√≥n de sinfones (globo->lobo).`,
            raul: `<strong>Caso:</strong> Ra√∫l articula bien aisladamente, pero en habla simplifica.<br><strong>Procesos:</strong> Omisi√≥n de consonantes finales/iniciales, met√°tesis (lim√≥n->mil√≥n).`,
            angel: `<strong>Relato:</strong> "Hola mi nombrle es √Ångel..."<br><strong>Causa:</strong> Malformaci√≥n del frenillo lingual (corto). Dificultad fonemas vibrantes.`,
            luis: `<strong>Relato:</strong> Lentitud, tono bajo, mon√≥tono. "Hoollaa...".<br><strong>Signos:</strong> Debilidad y espasticidad en un lado del cuerpo, lengua y labios. (¬°Atenci√≥n a signos neurol√≥gicos!)`
        };

        const tasks = [
            { id: 1, title: "TAREA 1: Identificaci√≥n", desc: "Identificar trastorno y subtipo con evidencias." },
            { id: 2, title: "TAREA 2: Indicadores", desc: "Elaborar lista de indicadores de riesgo (m√≠nimo 6)." },
            { id: 3, title: "TAREA 3: Intervenci√≥n", desc: "2 actividades (una inclusiva). Describir relaci√≥n con dificultad." }
        ];

        // APP LOGIC
        const app = {
            history: [],
            currentCase: null,

            // --- NAVIGATION ---
            show(id) {
                document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
                document.getElementById(id).classList.remove('hidden');
                const bc = document.getElementById('breadcrumbs');
                if (id === 'view-home') { bc.classList.add('hidden'); this.history = []; } 
                else { bc.classList.remove('hidden'); this.updateBreadcrumbs(); }
            },

            updateBreadcrumbs() {
                const bc = document.getElementById('breadcrumbs');
                let text = "Inicio";
                if (this.history.length > 0) text += " > " + this.history[this.history.length-1];
                bc.innerText = "< " + text;
            },

            goHome() { this.renderDegrees(); },

            // --- RENDERS ---
            renderDegrees() {
                const degrees = [
                    { id: '1', title: 'M√°ster Formaci√≥n Profesorado' },
                    { id: '2', title: 'M√°ster Metodolog√≠as Activas' },
                    { id: '3', title: 'Grado Educaci√≥n Infantil' }
                ];
                const g = document.getElementById('degrees-grid');
                g.innerHTML = '';
                degrees.forEach(d => {
                    g.innerHTML += `<div class="card"><h3>${d.title}</h3><button class="btn" onclick="app.loadDegree('${d.id}')">Entrar</button></div>`;
                });
                this.show('view-home');
            },

            loadDegree(id) {
                this.history = ["Asignaturas"];
                const g = document.getElementById('subjects-grid');
                g.innerHTML = '';
                if(id === '3') {
                    // Solo desplegamos la asignatura importante para el ejemplo
                    g.innerHTML += `<div class="card"><h3>43GEIN_04</h3><p>Dificultades aprendizaje y trastornos...</p><button class="btn" onclick="app.loadSubject('43GEIN')">Acceder</button></div>`;
                    g.innerHTML += `<div class="card"><h3>8GEIN_04</h3><p>Estimulaci√≥n oral</p><button class="btn" onclick="alert('Demo centrada en 43GEIN')">Acceder</button></div>`;
                } else {
                    g.innerHTML = `<p>Contenido de otros m√°sters...</p>`;
                }
                document.getElementById('degree-title').innerText = "Asignaturas Disponibles";
                this.show('view-subjects');
            },

            loadSubject(code) {
                if(code === '43GEIN') {
                    this.history.push("43GEIN");
                    const g = document.getElementById('units-grid');
                    g.innerHTML = `
                        <div class="card"><h3>UC 2</h3><button class="btn" disabled>Pr√≥ximamente</button></div>
                        <div class="card"><h3>UC 3 (Trastornos Comunicaci√≥n)</h3><button class="btn" onclick="app.loadUC3Menu()">Entrar</button></div>
                        <div class="card"><h3>UC 4</h3><button class="btn" disabled>Pr√≥ximamente</button></div>`;
                    document.getElementById('unit-subject-title').innerText = "Unidades Competenciales";
                    this.show('view-units');
                }
            },

            loadUC3Menu() {
                this.history.push("UC3");
                this.show('view-uc3-menu');
            },

            loadUC3ActivityMenu() {
                this.history.push("Casos Pr√°cticos");
                this.show('view-uc3-cases-menu');
            },

            loadUC3PracticeLevels() {
                this.history.push("Pr√°ctica");
                const g = document.getElementById('uc3-levels-grid');
                g.innerHTML = `
                    <div class="card"><h3>Nivel 1 (F√°cil)</h3><button class="btn" onclick="app.loadUC3SimGrid(1)">Ir</button></div>
                    <div class="card"><h3>Nivel 2 (Intermedio)</h3><button class="btn" onclick="app.loadUC3SimGrid(2)">Ir</button></div>
                    <div class="card"><h3>Nivel 3 (Dif√≠cil)</h3><button class="btn" onclick="app.loadUC3SimGrid(3)">Ir</button></div>
                `;
                this.show('view-uc3-levels');
            },

            loadUC3SimGrid(lvl) {
                this.history.push("Simulaciones L" + lvl);
                const g = document.getElementById('uc3-sim-grid');
                g.innerHTML = '';
                for(let i=1; i<=20; i++) g.innerHTML += `<div class="card-sim">Simulaci√≥n ${i}</div>`;
                g.innerHTML += `<div class="card-sim card-ia" onclick="alert('Generando nueva con IA...')">+ Nueva con IA</div>`;
                document.getElementById('uc3-sim-title').innerText = "Nivel " + lvl;
                this.show('view-uc3-sims');
            },

            // --- CASE LOGIC & CHAT ---
            loadCase(key) {
                this.currentCase = key;
                this.history.push("Caso " + key.charAt(0).toUpperCase() + key.slice(1));
                
                document.getElementById('case-title').innerText = "Caso de Estudio: " + key.toUpperCase();
                document.getElementById('case-content').innerHTML = `<div class="case-text">${casesData[key]}</div>`;

                const tasksContainer = document.getElementById('case-tasks');
                tasksContainer.innerHTML = '';

                tasks.forEach(task => {
                    const chatId = `chat-${key}-${task.id}`;
                    tasksContainer.innerHTML += `
                        <div class="task-block">
                            <div class="task-title">${task.title}</div>
                            <p class="task-desc">${task.desc}</p>
                            <div class="chat-box">
                                <div class="chat-header">
                                    <span>üí¨ Tutor IA (Entrenado)</span>
                                    <span style="font-size:0.8rem; font-weight:normal; opacity:0.8">Conectado a Base de Conocimiento UC3</span>
                                </div>
                                <div class="chat-messages" id="${chatId}">
                                    <div class="message msg-ai">Hola. Soy tu tutor virtual. He revisado la teor√≠a del caso de ${key.charAt(0).toUpperCase() + key.slice(1)}. ¬øQu√© planteamiento tienes para esta tarea?</div>
                                </div>
                                <div class="chat-input-area">
                                    <input type="text" class="chat-input" id="input-${chatId}" placeholder="Escribe tu respuesta o duda..." onkeypress="if(event.key==='Enter') app.sendMessage('${key}', ${task.id})">
                                    <button class="chat-btn" onclick="app.sendMessage('${key}', ${task.id})">Enviar</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                this.show('view-uc3-case-detail');
            },

            sendMessage(caseKey, taskId) {
                const chatId = `chat-${caseKey}-${taskId}`;
                const inputId = `input-${chatId}`;
                const input = document.getElementById(inputId);
                const text = input.value.trim();
                
                if (!text) return;

                // 1. Mostrar mensaje usuario
                const msgContainer = document.getElementById(chatId);
                msgContainer.innerHTML += `<div class="message msg-user">${text}</div>`;
                input.value = '';
                msgContainer.scrollTop = msgContainer.scrollHeight;

                // 2. Simular "Escribiendo..."
                const loadingId = `loading-${Date.now()}`;
                msgContainer.innerHTML += `<div id="${loadingId}" class="message msg-ai" style="opacity:0.7">Analizando respuesta con base te√≥rica...</div>`;
                msgContainer.scrollTop = msgContainer.scrollHeight;

                // 3. Generar respuesta (SIMULADA PERO BASADA EN TEOR√çA)
                setTimeout(() => {
                    document.getElementById(loadingId).remove();
                    const aiResponse = this.generateAIResponse(caseKey, text);
                    msgContainer.innerHTML += `<div class="message msg-ai">${aiResponse}</div>`;
                    msgContainer.scrollTop = msgContainer.scrollHeight;
                }, 1500);
            },

            // --- SIMULADOR DE RESPUESTA IA (El "Cerebro" en acci√≥n) ---
            generateAIResponse(caseKey, userText) {
                const brain = aiBrain[caseKey];
                const textLower = userText.toLowerCase();

                // L√≥gica simple de coincidencia para demostrar entrenamiento
                // En una app real, aqu√≠ se enviar√≠a 'brain.role' + 'brain.theory' + 'userText' a la API.

                let response = "";

                // RESPUESTAS ESPEC√çFICAS POR CASO (Simulando lo que har√≠a la API real)
                
                // CASO MARINA
                if (caseKey === 'marina') {
                    if (textLower.includes('operar') || textLower.includes('cirug√≠a') || textLower.includes('quitar n√≥dulos')) {
                        response = "üõë <b>Feedback Te√≥rico:</b> Cuidado. El manual indica que en ni√±os los n√≥dulos suelen remitir con reeducaci√≥n. La cirug√≠a es el √∫ltimo recurso. ¬øQu√© pautas de <i>higiene vocal</i> podr√≠as proponer primero?";
                    } else if (textLower.includes('grita') || textLower.includes('esfuerzo')) {
                        response = "‚úÖ Correcto. Has identificado el factor de 'mal uso y abuso vocal'. Para la Tarea 3, ¬øc√≥mo trabajar√≠as la concienciaci√≥n de este abuso en un aula de 5 a√±os?";
                    } else {
                        response = `Interesante aporte. Recuerda que para Marina, mi instrucci√≥n interna es priorizar la <b>Higiene Vocal</b> sobre la intervenci√≥n directa. ¬øTu propuesta reduce su esfuerzo laringeo?`;
                    }
                }
                
                // CASO ANA√çS
                else if (caseKey === 'anais') {
                    if (textLower.includes('retraso') || textLower.includes('simplifica')) {
                        response = "‚ö†Ô∏è <b>Revisi√≥n Te√≥rica:</b> Ojo, Ana√≠s tiene errores estables (/r/ y /s/). ¬øEst√°s seguro que es un retraso fonol√≥gico (simplificaci√≥n) o es algo m√°s articulatorio (Dislalia)? Revisa la diferencia entre Fon√©tica y Fonolog√≠a en los apuntes.";
                    } else if (textLower.includes('praxias') || textLower.includes('articular')) {
                        response = "‚úÖ Bien enfocado. Al ser una dificultad fon√©tica (mec√°nica), las praxias y la discriminaci√≥n del punto de articulaci√≥n son claves.";
                    } else {
                        response = "Ten en cuenta que Ana√≠s sustituye sistem√°ticamente. ¬øDir√≠as que 'no sabe' pronunciar (motor) o que 'no sabe' d√≥nde poner el sonido (mental)? Eso cambia tu diagn√≥stico.";
                    }
                }

                // CASO RA√öL
                else if (caseKey === 'raul') {
                    if (textLower.includes('dislalia') || textLower.includes('boca')) {
                        response = "‚ö†Ô∏è <b>Correcci√≥n Te√≥rica:</b> Revisa el caso. Ra√∫l PUEDE articular los fonemas aislados. Su problema es al usarlos en palabras (dice 'mil√≥n' por 'lim√≥n'). Eso es <b>Fonol√≥gico</b>, no Dislalia. ¬øC√≥mo cambiar√≠a tu actividad sabiendo esto?";
                    } else {
                        response = "Exacto. Al ser un tema de estructuraci√≥n (procesos de simplificaci√≥n de L. Bosch), tus actividades deben jugar con s√≠labas y sonidos, no solo con mover la lengua.";
                    }
                }

                // CASO √ÅNGEL
                else if (caseKey === 'angel') {
                    if (textLower.includes('ense√±ar a hablar') || textLower.includes('ejercicios')) {
                        response = "Recuerda que la causa es org√°nica (frenillo corto). Por muchos ejercicios que haga, si hay limitaci√≥n f√≠sica, no avanzar√°. ¬øQu√© profesional m√©dico debe intervenir primero seg√∫n el protocolo de Disglosias?";
                    } else {
                        response = "Bien. Una vez descartada o tratada la parte org√°nica (m√©dica), tu labor en el aula ser√° evitar que coja vicios articulatorios compensatorios.";
                    }
                }

                // CASO LU√çS
                else if (caseKey === 'luis') {
                    if (textLower.includes('tartamudez') || textLower.includes('disfemia')) {
                        response = "‚ö†Ô∏è <b>¬°Alerta Te√≥rica!</b> Has detectado los bloqueos, bien. Pero el texto menciona 'espasticidad' y 'debilidad' en un lado del cuerpo. La tartamudez pura NO tiene s√≠ntomas motores corporales. ¬øPodr√≠a ser una Disartria o algo neurol√≥gico?";
                    } else {
                        response = "Es un caso complejo. Valora siempre si la dificultad de fluidez viene de una tensi√≥n nerviosa (disfemia) o de una incapacidad motora neuronal (disartria).";
                    }
                }

                return response;
            }
        };

        app.renderDegrees();
    </script>
</body>
</html>
